<%
    const Data = {
        course: (id) => {
            for(let c = 0; c < data.course.length; c++){
                if(id === data.course[c].id){
                    return data.course[c].type
                }
            }
        },
        year: (id) => {
            for(let c = 0; c < data.year.length; c++){
                if(id === data.year[c].id){
                    return data.year[c].type
                }
            }
        }
    }
%>
<% if(users.length > 0) { %> 
    <% for (let i = 0; i < users.length; i++) { %>
        <div data="<%- users[i]._id %>" style="animation-delay: <%- i * .250%>s;" class="user_list_main animate__animated animate__fadeInUp ms-500 relative dark_border shadow-lg rounded-md dark:bg-darkBlue-secondary p-3">
            <div class="badge-status">
                <% if(users[i].socket_id === "Waiting For Student" || users[i].socket_id === "Offline"){ %>
                    <div class="absolute dark:bg-gray-500 h-4 w-4 rounded-full right-3"></div>
                <% } else { %>
                    <div class="absolute dark:bg-teal-700 h-4 w-4 rounded-full right-3"></div>
                <% } %>
            </div>
            <div class="flex flex-col gap-2 items-center">
                <img class="h-36 w-36 object-cover rounded-full skeleton-image transition-all" alt="user_icon" data="<%-`${users[i].firstname.split('')[0].toUpperCase()} ${users[i].lastname.split('')[0].toUpperCase()}`%>">
                <div class="flex flex-col justify-center items-center">
                    <p class="text-lg dark:text-gray-300/90 font-normal mb-1"><%- `${users[i].firstname} ${users[i].middlename} ${users[i].lastname}` %></p>
                    <p class="text-base dark:text-blue-600 font-normal"><%- `${Data.course(users[i].course)} ${Data.year(users[i].year)}` %></p>
                </div>
            </div>
            <div class="flex w-full mt-5">
                <button class="rpl w-full dark:bg-purple-800/60 py-2 rounded-md focus:outline-none dark:text-gray-300/80" type="button">View Profile</button>
            </div>
        </div>
    <% } %>
<% } else { %> 
    <div class="user_list_main col-span-full flex justify-center items-center">
        <div style="animation-delay: .250s;" class="animate__animated animate__fadeInUp ms-500 w-96 sm:w-full dark_border shadow-lg rounded-md dark:bg-darkBlue-secondary p-3">
            <div class="flex justify-center items-center">
                <p class="text-lg dark:text-gray-300/90 font-normal mb-1">Nothing To Fetch</p>
            </div>
        </div>
    </div>
<% } %>
<script>
    $(document).ready( function () {
        setTimeout(() => {
            $(".skeleton-image").each(function () {
                $(this).attr("src", avatar($(this).attr("data"), "#fff", dark(), 'bold 80px Assistant'))
                $(this).removeClass("skeleton-image")
            })
        }, 1000)
    })
</script>