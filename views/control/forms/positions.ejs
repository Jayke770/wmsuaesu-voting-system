<!DOCTYPE html>
<html lang="en" class="font-sans">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" class="theme-color" content="#6b21a8">
    <title>Election Positions</title>
    <%- include('../local_cdn/_home') %>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="/css/tailwindcss/style.css">
</head>
<body class="bg-gray-300 dark:bg-[#090c10] transition-all antialiased sm:overflow-hidden">
    <div class="container flex flex-col gap-2">
        <div class="w-full z-10 bg-gray-100 shadow-lg grid grid-cols-2 fixed top-0 p-2 px-3 transition-all">
            <div class="flex justify-start items-center">
                <a href="/control" class="rpl transition-all text-bluegray-600 text-2xl px-2 cursor-pointer mr-2">
                    <i class="fa fa-arrow-circle-left"></i>
                </a>
                <span class="font-bold text-purple-800 text-2xl">Positions</span>
            </div>
            <div class="flex items-center justify-end">
                <a class="add_pos_btn flex flex-row gap-2 items-center cursor-pointer rpl text-xl rounded-md p-2 px-3">
                    <span class="text-purple-700">
                        <i class="fas fa-plus-circle"></i>
                    </span>
                    <span class="sm:hidden text-[17px] text-purple-700 font-normal">Add Position</span>
                </a>
            </div>
        </div>
        <div class="positions_all mt-[62px] py-3 px-2 sm:px-2 grid grid-cols-5 xl:grid-cols-4 transition-all lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-none sm:flex sm:flex-col w-full h-[80%] sm:h-[calc(100vh-60px)] overflow-hidden sm:overflow-y-scroll gap-2">
           <% if (pos.length === 0) { %>
                <div class="empty_pos p-3 col-span-5 justify-center flex bg-gray-100 rounded-xl cursor-pointer">
                    <span class="text-purple-700">No Positions to fetch</span>
                </div>
           <% } else { %>
                <% for( let i = 0; i < pos[0].positions.length; i++ ) { %>
                    <div data="<%- pos[0].positions[i].id %>" style="animation-delay: <%- i * .100 %>s;" class="pos sm:last:mb-4 group animate__animated animate__fadeInUp p-3 grid grid-cols-2 bg-gray-100 rounded-xl cursor-pointer">
                        <div>
                            <span class="text-bluegray-900 text-base font-normal break-all"><%- pos[0].positions[i].type %></span>
                        </div>
                        <div class="hidden group-hover:flex animate__animated animate__fadeInLeft ms-200 transition-all justify-end items-center gap-1">
                            <a data="<%- pos[0].positions[i].id %>" class="rpl up_pos px-2 cursor-pointer text-green-600">
                                <i class="fas fa-edit"></i>
                            </a>
                            <a data="<%- pos[0].positions[i].id %>" class="rpl del_pos px-2 cursor-pointer text-rose-600">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </div>
                <% } %>
           <% } %>
        </div>
    </div>
    <div class="add_position p-2 z-20 fixed bg-gray-900/30 w-full h-full hidden top-0 justify-end items-center">
        <div class="add_position_main h-full w-96 xsm:w-full bg-gray-100 rounded-xl transition-all" animate-in="animate__animated animate__fadeInRight ms-400" animate-out="animate__animated animate__fadeOutRight ms-400">
            <div class="flex flex-row justify-center items-center p-4 border-b border-gray-300">
                <span class="font-bold text-xl text-purple-600 ">Add Position</span>
            </div>
            <form class="position_form p-2 h-[calc(100%-61px)] bg-rose grid grid-rows-2">
                <div class=" h-full flex flex-col p-2 gap-3 justify-start pt-10">
                    <input type="text" name="position" placeholder="Position" autocomplete="off" class="text-input w-full p-[10px] border border-gray-300 outline-none focus:ring-2 focus:ring-purple-400 transition-all rounded-lg" required>
                    <div class="px-1 mt-5 text-bluegray-900 font-normal text-base">Total Positions : <span class="total_pos text-purple-900 font-semibold">80</span></div>
                </div>
                <div class="flex flex-row w-full justify-center items-end">
                    <div class="w-full flex flex-row p-1 gap-2">
                        <button type="button" class="close_add_pos rpl transition-all text-red-600 border border-rose-500  font-normal py-[5px] rounded-lg outline-none mt-4 w-full">Close</button>
                        <button type="submit" class="rpl disabled:bg-purple-500 rpl hover:bg-purple-600 dark:bg-purple-700 bg-purple-700 text-white transition-all font-normal py-[5px] rounded-lg focus:ring focus:ring-offset-2 focus:ring-purple-500 focus:outline-none focus:shadow-outline mt-4 w-full">Add</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script src="/js/theme.js"></script>
    <script src="/js/time.js"></script>
    <script src="/js/avatar.js "></script>
    <script src="/js/toast.js"></script>
    <script src="/control/js/positions.js "></script>
    <script>
        $.ripple(".rpl", {
            debug: false,
            on: 'mousedown',
            opacity: 0.3,
            color: "auto",
            multi: false,
            duration: 0.7,
            rate: function(pxPerSecond) {
                return pxPerSecond;
            },
            easing: 'linear'
        })
    </script>
</body>
</html>