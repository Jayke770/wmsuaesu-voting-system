<!DOCTYPE html>
<html lang="en" class="font-sans" data="<%- election._id %>">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="csrf-token" content="<%- csrf %>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" class="theme-color" content="#991b1b">
    <link rel="shortcut icon" href="/assets/logo.png" type="image/x-png">
    <title><%- election.election_title %></title>
    <%- include('../cdn/_home') %>
    <link rel="stylesheet" href="/css/tailwindcss/style.css">
</head>
<body class="bg-gray-300 dark:bg-[#090c10] transition-all antialiased">
    <div class="election_details">
        <div class="header fixed top-0 z-30 w-full flex flex-row p-1 items-center bg-gray-50 dark:bg-[#161b22] shadow-md">
            <div class="flex-[20%] xl:flex-[50%] md:flex-[80%]">
                <div class="flex flex-row items-center transition-all">
                    <a href="<%- link %>" class="return_main transition-all text-gray-700 dark:text-gray-50 text-2xl cursor-pointer ml-3 mr-2">
                        <i class="fa fa-arrow-circle-left"></i>
                    </a>
                    <p class="m-0 p-3 text-lg font-medium cursor-pointer dark:text-gray-200"><%- election.election_title %></p>
                </div>
            </div>
            <div class="flex-[80%] xl:flex-[50%] md:flex-[20%]">
                <div class="nav_open_hidden hidden xl:w-full xl:flex justify-end mr-2">
                    <a class="cursor-pointer p-2 text-2xl rpl e_nav dark:text-gray-100">
                        <i class="fa fa-bars"></i>
                    </a>
                </div>
                <div animate-in="animate__animated animate__fadeInRight ms-300" animate-out="animate__animated animate__fadeOutRight ms-300" class="e_nav_main transition-all  flex xsm:w-[95%] xl:hidden xl:w-[350px] xl:p-2 xl:fixed xl:right-0 xl:h-full xl:bg-gray-100 xl:dark:bg-[#171b22]  xl:top-0 xl:shadow-2xl xl:flex-col xl:justify-start xl:items-start flex-row justify-end items-center w-full">
                    <div class="hidden xl:flex xl:justify-end xl:items-end w-full">
                        <i class="cls_e_nav float-right text-red-700 text-2xl cursor-pointer pr-3 pt-3 dark:text-[#cccbcb]">
                            <i class="fa fa-times-circle"></i>
                        </i>
                    </div>
                    <div class="center_btns flex flex-row items-center justify-center mr-2 border-red-800 border-r-2 xl:pb-3 xl:border-r-0 xl:border-b-2 xl:flex xl:flex-col xl:w-full xl:gap-2 xl:justify-start xl:items-start xl:px-2 xl:mt-4 transition-all">
                        <a data="election_details" class="election_btn rpl nav_btn dark:text-gray-300">Home</a>
                        <a data="voters" class="election_btn rpl nav_btn dark:text-gray-300">Voters</a>
                        <a class="election_btn rpl nav_btn dark:text-gray-300">Candidates</a>
                        <a class="election_btn rpl nav_btn dark:text-gray-300">Partylist</a>
                        <a class="election_btn rpl nav_btn dark:text-gray-300">Results</a>
                        <a class="election_btn e_settings rpl nav_btn dark:text-gray-300">Settings</a>
                    </div>
                    <div class="xl:flex xl:justify-center xl:w-full xl:h-full xl:items-end xl:pb-2">
                        <div class="flex flex-row items-center justify-center mr-1">
                            <span class="mr-2 dark:text-purple-300">Status :</span>
                            <div class="bg-yellow-500  py-1 text-sm px-2 rounded-lg "><%- election.status %></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="e_main_content w-full px-2 py-1 mt-16 transition-all">
            <div class="container">
                <div class="flex justify-center transition-all">
                    <div class="shadow-md bg-gray-50 dark:bg-[#161b22] rounded-md p-3 transition-all gap-2 flex flex-col">
                        <div class="container flex">
                            <span class="font-medium p-1 dark:text-gray-50 dark:font-normal">
                                <%- started && !end ? 'Election will end in' : started && end ? `Election ended ${endtime}` : `Election will begin in` %>
                            </span>
                        </div>
                        <div class="container flex flex-col justify-center items-center h-full p-2">
                            <div id="e_time" class="flipdown" data="<%- started ? election.end : election.start %>" started="<%- started ? 'true' : 'false' %>"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container mt-6">
                <div class="py-2">
                    <span class="dark:text-gray-300 text-2xl">Dashboard</span>
                </div>
                <div class="container mt-6">
                    <div class="gap-3 grid grid-cols-4 xl:gap-4 my:grid-cols-3 md:grid-cols-2 sm:grid-cols-none transition-all ">
                        <div class="cursor-pointer w-full  dark:bg-green-700/50 shadow-md bg-gray-50 rounded-md p-4 transition-all ">
                            <div class="grid grid-cols-2 transition-all">
                                <div class="text flex flex-col ml-3 mt-1 gap-3">
                                    <div class="text-4xl font-medium mt-1 tracking-wider dark:text-gray-100"><%- election.voters.length %></div>
                                    <span class="font-normal text-sm tracking-wide dark:text-gray-300">No. of Voters</span>
                                </div>
                                <div class="ic flex items-center w-full justify-end">
                                    <i class="fad fa-users text-6xl text-green-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="cursor-pointer w-full  dark:bg-yellow-700/50 shadow-md bg-gray-50 rounded-md p-4 transition-all ">
                            <div class="grid grid-cols-2 transition-all ">  
                                <div class="text flex flex-col ml-3 mt-1 gap-3">
                                    <div class="text-4xl font-medium mt-1 tracking-wider dark:text-gray-100"><%- election.partylist.length %></div>
                                    <span class="font-normal text-sm tracking-wide dark:text-gray-300">Partylist</span>
                                </div>
                                <div class="ic flex items-center justify-end">
                                    <i class="fad fa-balance-scale text-6xl text-yellow-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="w-full  dark:bg-purple-700/50 shadow-md bg-gray-50 rounded-md p-4 transition-all ">
                            <div class="grid grid-cols-2 transition-all ">
                                <div class="text flex flex-col ml-3 mt-1 gap-3">
                                    <div class="text-4xl font-medium mt-1 tracking-wider dark:text-gray-100"><%- election.candidates.length %></div>
                                    <span class="font-normal text-md tracking-wide dark:text-gray-300">Candidates</span>
                                </div>
                                <div class="ic flex items-center justify-end">
                                    <i class="fad fa-poll-people text-6xl text-purple-500 "></i>
                                </div>
                            </div>
                        </div>
                        <div class="w-full  dark:bg-rose-700/50 shadow-md bg-gray-50 rounded-md p-4 transition-all ">
                            <div class="grid grid-cols-2 transition-all ">
                                <div class="text flex flex-col ml-3 mt-1 gap-3">
                                    <div class="text-4xl font-medium mt-1 tracking-wider dark:text-gray-100"><%- election.candidates.length %></div>
                                    <span class="font-normal text-md tracking-wide dark:text-gray-300">Voted</span>
                                </div>
                                <div class="ic flex items-center justify-end">
                                    <i class="fad fa-edit text-6xl text-rose-500 "></i>
                                </div>
                            </div>
                        </div>
                        <div class="w-full dark:bg-violet-700/50 shadow-md bg-gray-50 rounded-md p-4 transition-all ">
                            <div class="grid grid-cols-2 transition-all ">
                                <div class="text flex flex-col ml-3 mt-1 gap-3">
                                    <div class="text-4xl font-medium mt-1 tracking-wider dark:text-gray-100"><%- election.positions.length %></div>
                                    <span class="font-normal text-md tracking-wide dark:text-gray-300">Positions</span>
                                </div>
                                <div class="ic flex items-center justify-end">
                                    <i class="fad fa-list-ol text-6xl text-violet-500 "></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container mt-6">
                <% 
                    function c(val) {
                        for (let c = 0; c < course.length; c++) {
                            if (val === course[c].id) {
                                return course[c].type
                            }
                        }
                    }
                    function y(val) {
                        for (let c = 0; c < year.length; c++) {
                            if (val === year[c].id) {
                                return year[c].type
                            }
                        }
                    }
                %>
                <div class="grid md:flex md:flex-col grid-cols-4 gap-3 xl:grid-cols-3 md:grid-cols-2 xl:gap-4 transition-all">
                    <div class="shadow-md bg-gray-50 dark:bg-emerald-700/50 rounded-md p-3 transition-all">
                        <div class="container flex">
                            <span class="font-medium p-1 dark:text-gray-50 dark:font-normal">Eligible Courses</span>
                        </div>
                        <div class="p-1 flex flex-wrap gap-2">
                            <% const e_crs = election.courses %>
                            <% for (let i = 0; i < e_crs.length; i++) { %>
                                <div style="border-color: rgba(126, 34, 206, 1)" class="border p-1 px-3 rounded-full cursor-pointer">
                                    <span class="text-gray-900 dark:text-gray-300 font-medium"><%- c(e_crs[i]) %></span>
                                </div> 
                            <% } %>
                        </div>
                    </div>
                    <div class="shadow-md bg-gray-50 dark:bg-pink-700/50 rounded-md p-3 transition-all">
                        <div class="container flex">
                            <span class="font-medium p-1 dark:text-gray-50 dark:font-normal">Eligible Year</span>
                        </div>
                        <div class="p-1 flex flex-wrap gap-2">
                            <% const e_yr = election.year %>
                            <% for (let i = 0; i < e_yr.length; i++) { %>
                                <div style="border-color: rgba(126, 34, 206, 1)" class="border p-1 px-3 rounded-full cursor-pointer">
                                    <span class="text-gray-900 dark:text-gray-300 font-medium"><%- y(e_yr[i]) %></span>
                                </div> 
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container mt-6">
                <%- include('votes-tally', {e_positions: election.positions, positions: positions}) %>
            </div>
        </div>
        <div class="voters_ fixed justify-end items-center hidden z-40 dark:bg-darkBlue-primary/60 top-0 w-full h-full p-2">
            <div class="voters_main dark:bg-darkBlue-secondary rounded-lg dark_border w-96 sm:w-full h-full" animate-in="animate__animated animate__fadeInRight ms-300" animate-out="animate__animated animate__fadeOutRight ms-300">
                <div class="container px-2">
                    <a class="close_voters rpl float-right rounded-full mt-2  p-2 justify-center flex flex-row gap-2 items-center cursor-pointer text-xl dark:text-rose-600">
                        <i class="fad fa-times-circle"></i>
                    </a>
                    <h1 class="font-bold dark:text-purple-500 text-2xl p-2">Voters</h1>
                </div>
                <div class="grid gap-2 grid-cols-2 py-2 px-3">
                    <a class="e_ac rpl rounded-md justify-center px-3 py-2 flex flex-row gap-2 items-center cursor-pointer text-xl dark:text-teal-600">
                        <i class="fad fa-user-check"></i>
                        <span class="text-base dark:text-gray-300 sm:hidden">Accepted Voters</span>
                    </a>
                    <a class="e_pend rpl rounded-md justify-center px-3 py-2 flex flex-row gap-2 items-center cursor-pointer text-xl dark:text-amber-600">
                        <i class="fad fa-users"></i>
                        <span class="text-base dark:text-gray-300 sm:hidden">Pending Voters</span>
                    </a>
                </div>
                <div class="flex flex-row w-full">
                    <form class="search_voter w-full">
                        <div class="container px-3">
                            <input type="search" name="text-input" placeholder="Search Voter by ID, Name, Course or Year" class="w-full outline-none dark_border dark:bg-transparent py-2 px-4 dark:text-gray-300 rounded-lg dark:focus:border-purple-700 transition-all">
                        </div>
                    </form>
                </div>
                <div class="acp_voters pt-5 grid transition-all gap-3 py-2 px-3 h-[calc(100%-150px)] overflow-y-auto">
                    <% for (let i = 0; i < 20; i++) { %>
                        <div style="animation-delay: <%- i * .150 %>s;" class="acp_voters_skeleton animate__animated animate__fadeInUp ms-300 h-[78px] dark_border dark:bg-[#161b22] z-0 p-[8px] md:w-full cursor-pointer flex flex-row shadow-xl bg-gray-100 rounded-2xl transition-all">
                            <div class="flex flex-row w-full">
                                <div class="relative">
                                    <div class="h-[60px] w-[60px] rounded-full object-cover skeleton-image"></div>
                                    <div class="absolute h-[15px] w-[15px] rounded-full skeleton right-[1px] bottom-1"></div>
                                </div>
                                <div class="grid grid-flow-col flex-[80%]">
                                    <div class="justify-center gap-1 w-full flex flex-col pl-3">
                                        <span class="text-base dark:text-gray-400 skeleton w-40"></span>
                                        <span class="text-sm dark:text-gray-400 skeleton w-32"></span>
                                    </div>
                                    <div class="w-full flex-row justify-end items-center flex">
                                        <a class="skeleton rounded-full p-2 justify-center flex flex-row gap-2 items-center cursor-pointer text-lg dark:text-cyan-600"></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/theme.js "></script>
    <script src="/js/fetch.js "></script>
    <script src="/js/time.js "></script>
    <script src="/js/toast.js "></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/control/js/io.js "></script>
    <script src="/control/js/election-details.js"></script>
    <script>
        $.ripple(".rpl", {
            debug: false,
            on: 'mousedown',
            opacity: 0.3,
            color: "auto",
            multi: false,
            duration: 0.7,
            rate: function(pxPerSecond) {
                return pxPerSecond;
            },
            easing: 'linear'
        })
    </script>
</body>
</html>